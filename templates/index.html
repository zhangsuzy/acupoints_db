<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>腧穴查询系统</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <h1>腧穴查询系统</h1>
    <form id="searchForm">
        <label for="meridian">选择经络：</label>
        <select id="meridian" name="meridian">
            <option value="肺经">肺经</option>
            <option value="心经">心经</option>
            <option value="脾经">脾经</option>
            <option value="肝经">肝经</option>
            <option value="胃经">胃经</option>
            <option value="肾经">肾经</option>
            <option value="三焦经">三焦经</option>
            <option value="胆经">胆经</option>
            <option value="任脉">任脉</option>
            <option value="督脉">督脉</option>
        </select>
        
        <label for="category">选择穴位类别：</label>
        <select id="category" name="category">
            <option value="原穴">原穴</option>
            <option value="络穴">络穴</option>
            <option value="背俞穴">背俞穴</option>
            <option value="募穴">募穴</option>
            <option value="郄穴">郄穴</option>
            <option value="八会穴">八会穴</option>
            <option value="八脉交会穴">八脉交会穴</option>
            <option value="下合穴">下合穴</option>
            <option value="四总穴">四总穴</option>
        </select>
        
        <button type="submit">查询</button>
    </form>
    
    <h2>查询结果</h2>
    <div id="results"></div>
    
    <script>
        document.getElementById("searchForm").addEventListener("submit", function(event) {
            event.preventDefault();
            const meridian = document.getElementById("meridian").value;
            const category = document.getElementById("category").value;
            
            fetch(`/get_acupoints?meridian=${meridian}&category=${category}`)
                .then(response => response.json())
                .then(data => {
                    let resultHTML = "";
                    if (data.length > 0) {
                        data.forEach(acupoint => {
                            resultHTML += `<p><strong>${acupoint.name}</strong> (${acupoint.code})<br>
                            <em>主治:</em> ${acupoint.indications}<br>
                            <em>配穴:</em> ${acupoint.pairing} (${acupoint.pairing_code})</p><hr>`;
                        });
                    } else {
                        resultHTML = "<p>未找到相关腧穴信息。</p>";
                    }
                    document.getElementById("results").innerHTML = resultHTML;
                })
                .catch(error => console.error("查询失败", error));
        });
    </script>
</body>
</html>